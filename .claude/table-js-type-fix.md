# Table.js ç±»å‹é”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸ¯ ä¿®å¤ç›®æ ‡

ä¿®å¤ `Table.js` ä¸­çš„ç±»å‹é”™è¯¯é—®é¢˜ï¼Œç§»é™¤ `@type {any}` ç±»å‹æ–­è¨€ï¼Œæé«˜ä»£ç ç±»å‹å®‰å…¨æ€§ã€‚

## ğŸ“ é—®é¢˜ä½ç½®

**æ–‡ä»¶**ï¼š`packages/cherry-markdown/src/core/hooks/Table.js`
**è¡Œå·**ï¼š365-371
**æ–¹æ³•**ï¼š`rule()`

## ğŸ” é—®é¢˜æè¿°

### åŸå§‹ä»£ç 
```javascript
/**
 * TODO: fix type errors
 * @returns
 */
rule() {
  return /** @type {any} */ (getTableRule());
}
```

### é—®é¢˜åˆ†æ
1. ä½¿ç”¨äº† `@type {any}` ç±»å‹æ–­è¨€æ¥æŠ‘åˆ¶ TypeScript é”™è¯¯
2. JSDoc æ³¨é‡Šä¸å®Œæ•´ï¼Œ`@returns` æ²¡æœ‰æŒ‡å®šè¿”å›ç±»å‹
3. å­˜åœ¨ `TODO` æ³¨é‡Šï¼Œè¡¨æ˜è¿™æ˜¯éœ€è¦ä¿®å¤çš„æŠ€æœ¯å€ºåŠ¡
4. `getTableRule()` è°ƒç”¨æ—¶æ²¡æœ‰å‚æ•°ï¼Œä½†åº”è¯¥ä¼ å…¥ `false` ä»¥è¿”å›å¯¹è±¡æ ¼å¼

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤åä»£ç 
```javascript
/**
 * Get table parsing rules
 * @returns {Object} Table rules object with strict and loose modes
 */
rule() {
  return getTableRule(false);
}
```

### ä¿®å¤å†…å®¹
1. **ç§»é™¤ç±»å‹æ–­è¨€**ï¼šåˆ é™¤ `/** @type {any} */` å¼ºåˆ¶ç±»å‹è½¬æ¢
2. **æ˜ç¡®å‚æ•°**ï¼šè°ƒç”¨ `getTableRule(false)` æ˜ç¡®è¿”å›å¯¹è±¡æ ¼å¼
3. **å®Œå–„æ–‡æ¡£**ï¼šæ·»åŠ æ¸…æ™°çš„ JSDoc æ³¨é‡Š
4. **ç§»é™¤ TODO**ï¼šåˆ é™¤é—ç•™çš„ TODO æ³¨é‡Š
5. **ç±»å‹å®‰å…¨**ï¼šç¡®ä¿è¿”å›ç±»å‹ç¬¦åˆå®é™…ä½¿ç”¨

## ğŸ“Š å˜æ›´ç»Ÿè®¡

- **ä¿®æ”¹æ–‡ä»¶**ï¼š1 ä¸ª
- **ä¿®æ”¹è¡Œæ•°**ï¼š6 è¡Œï¼ˆ3 è¡Œåˆ é™¤ï¼Œ3 è¡Œæ–°å¢ï¼‰
- **å½±å“èŒƒå›´**ï¼šä»… `rule()` æ–¹æ³•
- **é£é™©ç­‰çº§**ï¼šä½ï¼ˆä»…ç±»å‹æ”¹è¿›ï¼Œæ— é€»è¾‘å˜æ›´ï¼‰

## ğŸ”¬ æŠ€æœ¯ç»†èŠ‚

### getTableRule() å‡½æ•°
```javascript
// åœ¨ src/utils/regexp.js ä¸­å®šä¹‰
export function getTableRule(merge = false) {
  // ...
  if (merge === false) {
    return { strict, loose };  // è¿”å›å¯¹è±¡æ ¼å¼
  }
  // å¦åˆ™è¿”å›ç¼–è¯‘åçš„æ­£åˆ™è¡¨è¾¾å¼
  const regStr = `(?:${strict.begin + strict.content + strict.end}|${loose.begin + loose.content + loose.end})`;
  return compileRegExp({ begin: '', content: regStr, end: '' }, 'g', true);
}
```

### Table.js çš„ä½¿ç”¨æ–¹å¼
```javascript
// åœ¨ Table.js ä¸­
test(str, flavor) {
  return this.RULE[flavor].reg && this.RULE[flavor].reg.test(str);
}
```

`test()` æ–¹æ³•éœ€è¦è®¿é—® `this.RULE[flavor].reg`ï¼Œè¿™æ„å‘³ç€ `RULE` åº”è¯¥æ˜¯åŒ…å« `strict` å’Œ `loose` å±æ€§çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚

## ğŸ§ª éªŒè¯æ–¹æ³•

### TypeScript ç±»å‹æ£€æŸ¥
```bash
cd packages/cherry-markdown
npx tsc --noEmit --skipLibCheck
```

### åŠŸèƒ½æµ‹è¯•
```bash
npm test
```

## ğŸ“‹ æäº¤ä¿¡æ¯

**æäº¤å“ˆå¸Œ**ï¼š`5755c49`

**æäº¤ä¿¡æ¯**ï¼š
```
fix: ä¿®å¤Table.jsä¸­çš„ç±»å‹é”™è¯¯

## é—®é¢˜æè¿°
Table.jsçš„rule()æ–¹æ³•å­˜åœ¨ç±»å‹é”™è¯¯ï¼Œä½¿ç”¨äº†@type {any}ç±»å‹æ–­è¨€æ¥æŠ‘åˆ¶TypeScriptæ£€æŸ¥ã€‚

## ä¿®å¤æ–¹æ¡ˆ
1. ç§»é™¤@type {any}ç±»å‹æ–­è¨€
2. æ˜ç¡®è°ƒç”¨getTableRule(false)ï¼Œè¿”å›åŒ…å«strictå’Œlooseæ¨¡å¼çš„å¯¹è±¡
3. æ·»åŠ æ¸…æ™°çš„JSDocæ³¨é‡Šè¯´æ˜è¿”å›å€¼ç±»å‹
4. ç§»é™¤TODOæ³¨é‡Š

## å˜æ›´å†…å®¹
- ä¿®æ”¹rule()æ–¹æ³•è¿”å›å€¼å¤„ç†
- æ”¹è¿›ä»£ç å¯è¯»æ€§å’Œç±»å‹å®‰å…¨æ€§
- æ¶ˆé™¤æŠ€æœ¯å€ºåŠ¡

## éªŒè¯æ–¹å¼
- TypeScriptç±»å‹æ£€æŸ¥é€šè¿‡
- ä»£ç é€»è¾‘ä¿æŒä¸å˜

ğŸ¤– Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

## ğŸ¯ ä¿®å¤ä»·å€¼

### 1. æé«˜ä»£ç è´¨é‡
- æ¶ˆé™¤ç±»å‹å®‰å…¨æ¼æ´
- å‡å°‘æŠ€æœ¯å€ºåŠ¡
- æé«˜ä»£ç å¯ç»´æŠ¤æ€§

### 2. æ”¹å–„å¼€å‘ä½“éªŒ
- IDE æ™ºèƒ½æç¤ºæ›´å‡†ç¡®
- ä»£ç å¯¼èˆªæ›´å¯é 
- é‡æ„æ›´å®‰å…¨

### 3. æå‡å›¢é˜Ÿæ•ˆç‡
- å‡å°‘ç±»å‹ç›¸å…³é—®é¢˜
- æé«˜ä»£ç å®¡æŸ¥æ•ˆç‡
- é™ä½ bug é£é™©

## ğŸš€ åç»­å»ºè®®

### çŸ­æœŸ
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ç¡®ä¿æ— å›å½’
- [ ] å®¡æŸ¥å…¶ä»– Hook æ˜¯å¦å­˜åœ¨ç±»ä¼¼é—®é¢˜

### é•¿æœŸ
- [ ] é€æ­¥è¿ç§»åˆ° TypeScript
- [ ] å»ºç«‹æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- [ ] æ·»åŠ ç±»å‹å®šä¹‰æ–‡ä»¶

## ğŸ“ ç›¸å…³èµ„æº

- **getTableRule å®šä¹‰**ï¼š`src/utils/regexp.js:124`
- **Table ä½¿ç”¨æ–¹å¼**ï¼š`src/core/hooks/Table.js:361-363`
- **ç›¸å…³æ–‡æ¡£**ï¼š[TypeScript JSDoc](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)

## âœ… æ£€æŸ¥æ¸…å•

- [x] å®šä½ç±»å‹é”™è¯¯ä½ç½®
- [x] åˆ†æé”™è¯¯åŸå› 
- [x] å®æ–½ä¿®å¤æ–¹æ¡ˆ
- [x] éªŒè¯ä¿®å¤æ­£ç¡®æ€§
- [x] åˆ›å»ºæäº¤
- [ ] æ¨é€åˆ°è¿œç¨‹ä»“åº“
- [ ] åˆ›å»º PR
- [ ] ç­‰å¾…å®¡æŸ¥

---

**çŠ¶æ€**ï¼šâœ… ä¿®å¤å®Œæˆ
**ä¸‹ä¸€æ­¥**ï¼šæ¨é€åˆ°è¿œç¨‹å¹¶åˆ›å»º PR
**ä¿®å¤æ—¶é—´**ï¼š2025-11-04
**å½±å“èŒƒå›´**ï¼šä½é£é™©ï¼Œä»…ç±»å‹æ”¹è¿›
